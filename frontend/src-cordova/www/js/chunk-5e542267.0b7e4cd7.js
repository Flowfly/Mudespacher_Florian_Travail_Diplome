(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e542267"],{"0e8f":function(t,i,e){"use strict";e("db6d");var s=e("e8f2");i["a"]=Object(s["a"])("flex")},"1ef2":function(t,i,e){t.exports=e.p+"media/success.2c6d670c.mp3"},"23bf":function(t,i,e){"use strict";var s=e("80d2"),n=e("2b0e");i["a"]=n["a"].extend({name:"measurable",props:{height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},computed:{measurableStyles:function(){var t={},i=Object(s["b"])(this.height),e=Object(s["b"])(this.minHeight),n=Object(s["b"])(this.minWidth),a=Object(s["b"])(this.maxHeight),r=Object(s["b"])(this.maxWidth),o=Object(s["b"])(this.width);return i&&(t.height=i),e&&(t.minHeight=e),n&&(t.minWidth=n),a&&(t.maxHeight=a),r&&(t.maxWidth=r),o&&(t.width=o),t}}})},"253d":function(t,i,e){},"301b":function(t,i,e){t.exports=e.p+"img/waiting.66184e44.gif"},"40c6":function(t,i,e){t.exports=e.p+"img/answer.8b9caa02.png"},"46ba":function(t,i,e){},"4c34":function(t,i,e){},"58df":function(t,i,e){"use strict";e.d(i,"a",function(){return n});var s=e("2b0e");function n(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e];return s["a"].extend({mixins:i})}},6861:function(t,i,e){"use strict";var s=e("46ba"),n=e.n(s);n.a},"744c":function(t,i,e){t.exports=e.p+"img/answer_error.23ccc540.png"},"77bb":function(t,i,e){"use strict";var s=e("fb55"),n=e.n(s);n.a},"899e":function(t,i,e){t.exports=e.p+"media/error.0308a27f.mp3"},"91f6":function(t,i,e){t.exports=e.p+"img/answer_success.54d3914e.png"},adda:function(t,i,e){"use strict";e("253d"),e("4c34");var s=e("23bf"),n=e("58df"),a=Object(n["a"])(s["a"]).extend({name:"v-responsive",props:{aspectRatio:[String,Number]},computed:{computedAspectRatio:function(){return Number(this.aspectRatio)},aspectStyle:function(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer:function(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-responsive__content"},this.$slots.default)}},render:function(t){return t("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}}),r=a,o=e("d9bd");i["a"]=r.extend({name:"v-img",props:{alt:String,contain:Boolean,src:{type:[String,Object],default:""},gradient:String,lazySrc:String,srcset:String,sizes:String,position:{type:String,default:"center center"},transition:{type:[Boolean,String],default:"fade-transition"}},data:function(){return{currentSrc:"",image:null,isLoading:!0,calculatedAspectRatio:void 0}},computed:{computedAspectRatio:function(){return this.normalisedSrc.aspect},normalisedSrc:function(){return"string"===typeof this.src?{src:this.src,srcset:this.srcset,lazySrc:this.lazySrc,aspect:Number(this.aspectRatio||this.calculatedAspectRatio)}:{src:this.src.src,srcset:this.srcset||this.src.srcset,lazySrc:this.lazySrc||this.src.lazySrc,aspect:Number(this.aspectRatio||this.src.aspect||this.calculatedAspectRatio)}},__cachedImage:function(){if(!this.normalisedSrc.src&&!this.normalisedSrc.lazySrc)return[];var t=[],i=this.isLoading?this.normalisedSrc.lazySrc:this.currentSrc;this.gradient&&t.push("linear-gradient("+this.gradient+")"),i&&t.push('url("'+i+'")');var e=this.$createElement("div",{staticClass:"v-image__image",class:{"v-image__image--preload":this.isLoading,"v-image__image--contain":this.contain,"v-image__image--cover":!this.contain},style:{backgroundImage:t.join(", "),backgroundPosition:this.position},key:+this.isLoading});return this.transition?this.$createElement("transition",{attrs:{name:this.transition,mode:"in-out"}},[e]):e}},watch:{src:function(){this.isLoading?this.loadImage():this.init()},"$vuetify.breakpoint.width":"getSrc"},mounted:function(){this.init()},methods:{init:function(){if(this.normalisedSrc.lazySrc){var t=new Image;t.src=this.normalisedSrc.lazySrc,this.pollForSize(t,null)}this.normalisedSrc.src&&this.loadImage()},onLoad:function(){this.getSrc(),this.isLoading=!1,this.$emit("load",this.src)},onError:function(){Object(o["a"])("Image load failed\n\nsrc: "+this.normalisedSrc.src,this),this.$emit("error",this.src)},getSrc:function(){this.image&&(this.currentSrc=this.image.currentSrc||this.image.src)},loadImage:function(){var t=this,i=new Image;this.image=i,i.onload=function(){i.decode?i.decode().catch(function(i){Object(o["c"])("Failed to decode image, trying to render anyway\n\nsrc: "+t.normalisedSrc.src+(i.message?"\nOriginal error: "+i.message:""),t)}).then(t.onLoad):t.onLoad()},i.onerror=this.onError,i.src=this.normalisedSrc.src,this.sizes&&(i.sizes=this.sizes),this.normalisedSrc.srcset&&(i.srcset=this.normalisedSrc.srcset),this.aspectRatio||this.pollForSize(i),this.getSrc()},pollForSize:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=function s(){var n=t.naturalHeight,a=t.naturalWidth;n||a?i.calculatedAspectRatio=a/n:null!=e&&setTimeout(s,e)};s()},__genPlaceholder:function(){if(this.$slots.placeholder){var t=this.isLoading?[this.$createElement("div",{staticClass:"v-image__placeholder"},this.$slots.placeholder)]:[];return this.transition?this.$createElement("transition",{attrs:{name:this.transition}},t):t[0]}}},render:function(t){var i=r.options.render.call(this,t);return i.data.staticClass+=" v-image",i.data.attrs={role:this.alt?"img":void 0,"aria-label":this.alt},i.children=[this.__cachedSizer,this.__cachedImage,this.__genPlaceholder(),this.genContent()],t(i.tag,i.data,i.children)}})},c92b:function(t,i,e){},e297:function(t,i,e){"use strict";var s=e("c92b"),n=e.n(s);n.a},ef87:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return null!==t.questionData?e("v-container",{staticClass:"answer-main",attrs:{fluid:"","fill-height":"","d-block":""}},[e("waiting",{directives:[{name:"show",rawName:"v-show",value:t.isWaiting,expression:"isWaiting"}]}),e("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.isWaiting,expression:"!isWaiting"}],staticClass:"answer-container",attrs:{row:"",wrap:""}},[e("v-layout",{staticClass:"hcenter",attrs:{"align-center":"","justify-center":"","d-inline-block":""}},[e("v-flex",{staticStyle:{"text-align":"center"}},[e("h2",{model:{value:t.timeToWait,callback:function(i){t.timeToWait=i},expression:"timeToWait"}},[t._v("Temps restant : "+t._s(t.timeToWait))])]),e("v-flex",{staticStyle:{"text-align":"center"}},[e("h1",[t._v("Question à "+t._s(t.questionData.points)+" points !")]),e("h1",[t._v(t._s(t.questionData.label))])]),e("center",t._l(t.questionData.propositions,function(i,s){return e("v-flex",{staticClass:"answer",staticStyle:{height:"160px"},attrs:{id:"bubble-"+s}},[e("answercomponent",{attrs:{propositionNumber:s,question:t.questionData},on:{"clicked-from-child":t.answerQuestion}})],1)}),1)],1)],1)],1):t._e()},n=[],a=(e("7f7f"),e("cebc")),r=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("v-layout",{staticClass:"waiting-container",attrs:{row:"",wrap:""}},[s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("div",{staticStyle:{"text-align":"-webkit-center"}},[s("h1",[t._v("En attente des autres joueurs")]),s("v-img",{staticClass:"item",attrs:{src:e("301b"),alt:"waiting"}})],1)])],1)},o=[],c={name:"Waiting"},l=c,u=(e("e297"),e("2877")),h=e("6544"),d=e.n(h),m=e("adda"),g=e("a722"),f=Object(u["a"])(l,r,o,!1,null,"18da9e4a",null),p=f.exports;d()(f,{VImg:m["a"],VLayout:g["a"]});var b=e("1549"),S=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"answer-container",on:{click:t.answer}},[e("p",{staticClass:"answer-text"},[t._v(t._s(this.question.propositions[this.propositionNumber].label))])])},v=[],w={name:"AnswerComponent",data:function(){return{}},props:["question","propositionNumber"],mounted:function(){},methods:{answer:function(){this.$emit("clicked-from-child",[this.question.propositions[this.propositionNumber].id,this.question.propositions[this.propositionNumber].is_right_answer])}}},_=w,y=(e("77bb"),Object(u["a"])(_,S,v,!1,null,"9a836ca8",null)),I=y.exports,C=e("2f62"),E=e("5638");window.Pusher=e("782e"),window.Echo=new E["a"]({broadcaster:b["a"].WEB_SOCKET_SERVICE.broadcaster,key:b["a"].WEB_SOCKET_SERVICE.key,cluster:b["a"].WEB_SOCKET_SERVICE.cluster,encrypted:b["a"].WEB_SOCKET_SERVICE.encrypted});var W={name:"Answer",components:{waiting:p,answercomponent:I},data:function(){return{questionData:null,isWaiting:!1,canClick:!0,timeToWait:b["a"].TIME_TO_ANSWER,timer:null,falseAnswerId:null,sound:null,errorImg:new Image,successImg:new Image,defaultImg:new Image}},computed:Object(a["a"])({},Object(C["c"])(["SessionId","UserInfos"])),methods:Object(a["a"])({fillAnswerComponents:function(){var t=this;this.getActualQuestion(this.SessionId).done(function(i){t.questionData=i.data}).fail(function(t){console.log(t)})},answerQuestion:function(t){var i=this;if(console.log(this.canClick),this.canClick){1===t[1]?(this.sound=new Audio(e("1ef2")),this.sound.play()):(this.sound=new Audio(e("899e")),this.sound.play()),this.canClick=!1;for(var s=0;s<this.questionData.propositions.length;s++)0===this.questionData.propositions[s].is_right_answer?document.querySelector("#bubble-".concat(s)).style.backgroundImage="url('".concat(this.errorImg.src,"')"):document.querySelector("#bubble-".concat(s)).style.backgroundImage="url('".concat(this.successImg.src,"')");setTimeout(function(){var e={proposition_id:t[0],user_id:i.UserInfos.id,session_id:i.SessionId};i.userAnswer(e).done(function(t){"success"===t.status?i.clearTimer():i.canClick=!i.canClick}).fail(function(t){i.canClick=!i.canClick,console.log(t)}).always(function(){i.isWaiting=!i.isWaiting;for(var t=0;t<i.questionData.propositions.length;t++)document.querySelector("#bubble-".concat(t)).style.backgroundImage="url('".concat(i.defaultImg.src,"')")})},1e3)}},waitingTimeCheck:function(){var t=this;if("answer"===this.$route.name)if(0===this.timeToWait){this.clearTimer();for(var i=0;i<this.questionData.propositions.length;i++)if(0===this.questionData.propositions[i].is_right_answer){this.falseAnswerId=this.questionData.propositions[i].id;break}var e={proposition_id:this.falseAnswerId,user_id:this.UserInfos.id,session_id:this.SessionId};this.userAnswer(e).done(function(i){"success"===i.status&&(t.isWaiting=!t.isWaiting)}).fail(function(t){console.log(t)})}else console.log("timer -1"),this.timeToWait=this.timeToWait-1;else this.clearTimer(),this.timer=null},clearTimer:function(){clearInterval(this.timer),this.timeToWait=b["a"].TIME_TO_ANSWER},listen:function(){var t=this;window.Echo.channel("finish-game-".concat(this.SessionId)).listen("FinishGame",function(){window.Echo.leave("session-".concat(t.SessionId)),window.Echo.leave("change-question-".concat(t.SessionId)),t.clearTimer();var i={user_id:t.UserInfos.id,session_id:t.SessionId};t.getScore(i).done(function(i){t.setUserResult({numberOfCorrectAnswers:i.correctAnswers,score:i.score}),t.$router.push("/end")}).fail(function(t){console.log(t)})}),window.Echo.channel("session-".concat(this.SessionId)).listen("StartSession",function(){t.isWaiting=!1,t.timer=setInterval(t.waitingTimeCheck,1e3)}),window.Echo.channel("change-question-".concat(this.SessionId)).listen("ChangeQuestion",function(i){console.log("question changée"),t.timer=setInterval(t.waitingTimeCheck,1e3),t.questionData=i.question,t.isWaiting=!t.isWaiting,t.canClick=!0})}},Object(C["b"])(["getActualQuestion","userAnswer","getScore"]),Object(C["d"])(["setSessionId","setUserResult"])),mounted:function(){this.listen(),this.isWaiting=!0,this.fillAnswerComponents(),this.errorImg.src=e("744c"),this.successImg.src=e("91f6"),this.defaultImg.src=e("40c6")},destroyed:function(){this.clearTimer(),console.log("timer destroyed")}},x=W,k=(e("6861"),e("a523")),T=e("0e8f"),A=Object(u["a"])(x,s,n,!1,null,"0b58ab55",null);i["default"]=A.exports;d()(A,{VContainer:k["a"],VFlex:T["a"],VLayout:g["a"]})},fb55:function(t,i,e){}}]);
//# sourceMappingURL=chunk-5e542267.0b7e4cd7.js.map